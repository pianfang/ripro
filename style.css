/*!
Theme Name: RiPro-V5
Theme URI: https://ritheme.com/
Author: RiTheme.com
Author URI: https://ritheme.com/
Description: RiPro主题全新V5版本，是一个优秀且功能强大、易于管理、现代化的WordPress虚拟资源商城主题。支持首页模块化布局和WP原生小工具模块化首页可拖拽设置，让您的网站设计体验更加舒适。同时支持了高级筛选、自带会员生态系统、超全支付接口等众多功能，无需依赖插件即可实现。此外，主题还支持卡密、充值、站内币、会员、推广佣金、统计、自定义币种、自定义会员标识、支持自定义SEO信息等多种功能，为您的网站提供更加完整的解决方案。文档教程地址：https://ritheme.com/document/category/ripro-v5
Version: 7.8
Requires at least: 5.0
Tested up to: 5.4
Requires PHP: 7.4
License: GNU General Public License v2 or later
License URI: LICENSE
Text Domain: ripro
*/


/*!



==>正式版7.8 2024-4-13
修复内容页面商城顶部布局模式下，图片较长引起文字介绍和下载购买按钮等元素变形溢出BUG
修复虎皮椒支付不支持手机唤醒BUG
修复首页cms文章模块等网格展示文章模块中，主题设置布局设置无法控制VIP图标开关BUG
修复文章内页中文章内容分页<!--nextpage-->分页符前端分页按钮显示错误BUG
新增专题功能，支持自定义专题SEO信息，专题封面，前端独立专题页面，前端独立专题合集，专题合集页面地址为网址/series，如打开提示404，请重新保存一遍固定连接格式即可，兼容老款riprov2的专题数据，无损，，


==>正式版7.7.2 2024-2-24
修复后台商城总览统计中用户余额排行榜排序错乱BUG
修复纯标题文章列表连接无法点击BUG
修复验图片验证码无法刷新BUG
修复邮箱验证码部分浏览器无效BUG
修复开启多域名后分站授权错误BUG
修复免登录购买缓存失效BUG
修复网站在开启CDN等head头信息时，导致网站cookie失效BUG
修复文章内容面顶部商城布局模式下，未登录用户无需下载功能开启无效，导致无法下载BUG



==>正式版7.6 2024-2-23
优化重做主题设置-布局设置-文章内容页布局-内容页展示风格第三种风格布局，改为更加直观详细得标题下购买区域，仅在有下载类型文章时显示
优化顶部登录注册按钮样式和夜间模式效果
优化更新languages文件夹中得英文和繁体翻译文件
新增-外观小工具-首页纯标题文章展示模块，可以控制显示列数，多个分类集合显示
新增-外观小工具-首页网站统计展示模块，可以控制开关展示运营天数、文章总数、用户总数、VIP会员数、今日注册用户数、近7天更新数、分类总数、评论总数、文章浏览量总数,统计数据为真实统计
新增网站右上角用户信息展开界面中支持一键签到功能，其次在个人中心余额界面也支持签到


==>正式版7.5 2024-2-21
新增主题设置-商城基本设置-免费资源下载无需登录即可下载开关，开启后，免费资源无需登录可直接下载查看
新增主题设置-广告设置-网站VIP用户不显示广告，开启后VIP用户不显示广告
新增主题设置-布局设置-文章内容页布局-文章内容新布局，开启后，新布局可以设置TAB切换按钮，常见问题，评论等，无需线下滑动界面，直观方便，建议开启
优化文章侧边栏下载购买区域资源价格折扣布局演示，更加直观
优化文章商城布局模式顶部显示文章资源价格时布局样式


==>正式版7.4 2024-1-24
修复网站使用彩虹易支付接口时，如果用户购买的时折扣商品而不成功提示BUG
修复在网站使用redis缓存时，用户下载次数第二天无法刷新BUG
修复免登录用户购买状态在网站使用redis缓存时无法实时刷新改变BUG


==>正式版7.3 2023-12-22
修复鼠标滑过文章列表缩略图视频缩略图播放时，鼠标移动过快导致不停止播放功能
修复手机端购买下载组件价格提示点击显示关闭而不是跳转vip页面
修复pc端顶部购买按钮价格优惠提示组件被底部背景遮挡BUG
新增对wordpress的Redis Object Cache缓存功能的兼容支持，在网站使用redis缓存功能后，大部分页面几乎0查询，速度超快，并且用户购买后状态会实时刷新不受影响，包括下载次数也会动态刷新。
新增文章侧边栏支持redis缓存，在文章侧边栏文章展示列表中，如果不选取要展示的分类，则展示当前文章分类推荐的文章
新增主题设置-布局设置-文章内容页面设置-文章内容顶部显示媒体预览播放器开关，默认开启，当文章有视频或音频缩略图时，点开文章内页自动加载播放器


==>正式版7.2 2023-12-15
修复第三方登录一键注册新用户无法个人中心修改密码提交后没有反应BUG
修复手机端下载按钮和购买按钮文字颜色重叠不清晰BUG
优化缩略图加载中动态加载中状态动画过渡效果，加载完后显示图片停止动画


==>正式版7.1 2023-12-13
新增外观小工具-最新文章模块-要展示分类快速查看按钮选项，选择要展示的分类按钮后，前台最新文章模块可以点击按钮无刷新查看分类文章，支持各种布局模式和无限懒加载
新增主题设置-布局设置-默认文章列表布局-列表辅助信息开关，可以单独控制显示日期时间、显示点赞数、显示阅读量、显示收藏数、价格小组件开关
新增主题设置-布局设置-默认文章列表布局-列表辅助信息-VIP图标开关，开启后对有付费资源的文章，如果有会员折扣则显示vip图标
新增文章网格列表的视频缩略图支持，如果文章列表模式时网格模式，在后台发布视频文章，并添加了媒体预览地址，前台即可实现鼠标滑过播放显示并显播放进度条
新增文章网格列表的音频缩略图支持，如果文章列表模式时网格模式，在后台发布音频文章，并添加了媒体预览地址，前台即可实现鼠标点击播放器播放音乐和显示进度条
新增文章内页标题下方自动判断如果设置了媒体预览，则自动调用播放器显示音视频播放界面，无需单独插入媒体，本次更新媒体缩略图功能和原本付费播放视频互不冲突影响，二者均可以单独存在
优化付费播放视频界面改为更协调得左右选集模式
优化文章内容中h12345标题加粗突出和a连接颜色突出
优化网站菜单顶部个人中心头像点击默认进入vip界面而不是资料界面，方便用户直观感受VIP功能
优化下侧边栏和文章顶部含有付费下载时，已购买用户下载按钮UI和复制密码按钮UI
优化刷新新增的功能界面中的文字英文和繁体中文翻译源文件
优化纯标题文字展示布局ui，使界面更加协调紧凑
优化下载按钮和密码复制按钮布局，本次更新新内容较多，包括js和css等文件，请刷新浏览器缓存



==>正式版7.0 2023-12-11
修复个人中心界面下载使用率小数点溢出BUG
新增主题设置基本设置，网站暗色模式LOGO，可以设置两个网站logo，设置后，前台用户切换颜色模式时，logo也会跟随切换
新增登录弹出中添加logo图片，并且支持颜色模式动态切换logo
新增主题设置，注册登录注册登录图片验证码开关，开启后登录注册找回密码等功能需要填写图片验证码
新增主题设置，注册需要邮箱验证码，注册需要邮箱验证码，开启后，注册需要填写邮箱验证码，需配置好网站smtp发信服务，防止恶意注册和扫描，建议图片验证码和邮箱验证码二选一，复杂的注册验证会流失用户


==>正式版6.9 2023-12-7
修复兼容文章内图片点击灯箱和相册功能无法识别webp格式图片问题
优化会员介绍卡片界面UI显示颜色
优化侧边栏下载资源购买组件界面UI，将折扣优惠信息改为鼠标滑动到折扣文字展现




==>正式版6.8 2023-12-3
修复文章内容图片居中无效bug


==>正式版6.7.0 2023-11-28
修复后台区块编辑器开启后，编辑界面内容不区域全宽错乱BUG
修复前台文章内容中有表格内容人或古腾堡编辑器表格居中对齐无效，无对齐布局时宽度无法全宽BUG
新增用户首次打开网站开启弹窗公告延迟1.5秒后弹出，提升用户交互流畅感知
新增首页模块高级搜索模块中手机强制图片背景开关按钮，开启后手机端使用图片背景效果，防止视频背景被部分国产流氓手机浏览器自动播放mp4造成布局错乱
新增主题设置高级搜索中搜索框支持按分类选择搜索开关，默认开启，关闭后不显示分类下拉选择选项



==>正式版6.6.0 2023-11-12
新增主题设置，登录注册选项中是否弹窗登录注册开关，开启后，用户前台点击登录可快速弹出登录框，如果喜欢传统单页登录可关闭此功能
优化移除顶部右侧登录按钮中的文字，只用用户图标表示登录按钮，保持图标对齐美观
更新优化主题包中得到languages翻译源文件



==>正式版6.5.0 2023-11-11
更新了与最新版WordPress 6.4.1的兼容性
修复微信官方支付开启h5外部浏览器弹出无法跳转支付BUG
修复后台商城管理中订单列表和卡密列表在已经删除的VIP套餐显示乱码报错BUG
优化vip会员介绍模块数量小于4个套餐时，自适应居中布局
新增全站弹窗公告可以点击公告内容外部空白区域关闭，增强用户体验



==>正式版6.4.0 2023-9-22
修复在php8.0版本中启用主题报错template-walker.php和template-tags.php中的可选参数BUG
优化移除标签云页面中显示分类项目，优化部分搜索框圆角和优惠码领取图标大小
优化小工具模块选取分类项目时不能显示其他分类或子分类问题
新增主题设置wp优化，使用网站菜单缓存开关，开启后网站顶部菜单支持缓存，减少SQL查询，如果是多域名菜单不一样，建议关闭此功能
新增默认文章列表布局设置，文章随机缩略图功能，不设置则不启用，建议添加10张，设置随机缩略图集则自动启用，对没有缩略图的文章随机缩略图，随机缩略图会带有文章id的关联算法，优化了搜索引擎抓图，防止完全随机导致收录后地址变更问题
新增首页模块VIP介绍展示，可以在首页展示VIP套餐介绍
新增主题设置，布局设置，内容页设置可以选择下载商品顶部布局风格，启用后，带有下载类文章自动展示顶部购买区域，普通文章不显示。
新增自动弹出公告功能，主题设置基本设置中开启后，用户首次打开网站自动弹出公告，关闭后或刷新不是第一次在当前浏览器打开则不重复弹出


==>正式版6.3.0 2023-9-3
修复封号用户依旧可以用第三方快捷登录网站BUG
修复登录用户在网站动态中无法显示昵称BUG
修复网站用户开通一天VIP套餐时开通无效显示已到期BUG
优化顶部菜单子菜单层级图标箭头标识显示
新增手机端底部菜单，支持自定义五个手机端底部含有图标名称的菜单


==>正式版6.2.0 2023-7-25
修复标签云页面和分类筛选页面筛选排序按钮连接未转义造成XSS漏洞执行js语句安全更新，对后端无安全隐患，知识前端页面会弹窗错位。
优化站内连接跳转，使用esc_url方法转义站内页面地址等，防止恶意拼接url造成页面错误


==>正式版6.1.0 2023-7-14
修复个人中心申请提醒按钮始终提示失败BUG
修复文章页底部上下篇翻页导航开关无效BUG
优化文章内容中pre代码块显示，超出宽度部分显示底部滚动条，移除复制按钮，防止和其他插件重复冲突
新增海报图片分享功能，根据网站缩略图是否有跨域使用权限，自动获取海报封面，点击海报封面可直接下载图片，如果缩略图有跨域拦截，不是本地图片，则自动给展示纯二维码和分享连接，海报生成功能为用户浏览器前端js使用canvas绘制，不会消耗任何服务器资源
新增内容页设置，文章内容侧边栏H目录导航，开启后，自动根据文章内容中的H1、2、3一二三级标题生成简单的文章目录，点击可以快速滑动到内容

==>正式版6.0.0 2023-7-10
修复老款自定义头像相对地址时无法显示BUG
新增主题设置会员组设置会员开通套餐配置，支持配置前端用户可以多套餐选择开通VIP套餐
新增后台卡密可以生成多套餐中的VIP兑换卡功能
新增首页模块添加卡密优惠码展示模块，每行一个

==>正式版5.9.0 2023-7-8
新增优化外观小工具搜索模块小工具支持视频背景设置
新增主题设置安全设置登录注册验证码开关

==>正式版5.8.0 2023-7-7
修复老款ripro迁移自定义字筛选字段无效BUG
修复文章侧边栏购买小工具在没有启用付费下载功能后依旧显示BUG
修复普通用户开通VIP时支付成功没有开通成功BUG
修复本地测试环境带端口的域名填写验证码无法验证BUG
修复部分暗黑模式下的手机端布局颜色错误BUG
新增主题设置布局设置文章页底部上下篇翻页导航开关

==>正式版5.7.0 2023-7-5
修复登录后评论提示信息高度溢出BUG
修复优化评论按钮CSS错位BUG
优化允许文章底部版权设置支持html代码版权内容，并使用wp_kses_post修复过滤不安全得html标签和为闭合得错误代码
优化个人中心推广用户列表显示人数过多不好看问题，改为限制前十个用户显示
优化搜索仅限搜索文章类型，防止页面和其他自定义页面索引消耗性能
新增主题设置，会员设置中，仅限在线支付购买开通VIP开关，开启后站内币不支持购买VIP，避免签到用户白嫖
新增网站默认颜色模式支持亮色（白天）深色（黑夜）自动（早晚）模式切换，支持顶部显示切换开关按钮，自动模式为当地时间早6点开始到晚18点为白天模式，其后为黑夜模式，系统自动时候别时区。

==>正式版5.6.0 2023-7-4
修复下载地址非文件类url站内链接跳转无法跳转和特殊代码无法deurlcode转码BUG
修复下载地址名称为自定义html代码时乱码BUG
修复与pods插件不兼容报错BUG
修复订单删除后，佣金记录还存在的BUG，防止无效或退款订单造成重复计算佣金BUG
优化侧边栏购买下载小工具价格信息显示，改为单行时间轴风格醒目的显示购买价格信息
优化去除无用的前端静态图标字体文件
优化更新翻译源文件，重新编译打包简体、繁体、英语三种默认语言po文件
新增主题设置，上传设置中可以开关上传文件MD5加密重命名功能，开启后，上传的附件重命名md5字符串，防止中文文件名部分场景报错
新增投稿功能，在主题设置基本设置可开启关闭，开启后支持网站用户支持投稿，支持上传附件，支持填写付费信息，支持填写多下载地址和多集播放地址
前端用户投稿支持前编辑文章，新增文章，删除文章，，修改文章发布状态等，设置上传特色图功能，投稿功能请根据自己需求开启，权限跟随wordpres系统本身用户权限控制，请注意恶意投稿上传风险
新增文章内容底部显示本文作者信息组件，点击作者头像昵称可以跳转作者的文章页面
新增内置付费播放器支持weba格式音频播放查看
新增文章侧边栏小工具作者信息展示小工具，可以显示作者信息和作者文章页面链接
新增首页模块小工具网站动态小工具，可以自动显示网站登录用户注册用户购买提现开头等动态信息，动态24小事刷新，24小时内没用动态则自动显示欢迎访问本站信息

==>正式版5.5.0 2023-6-30
修复关闭商城功能时，文章列表展示调用时，因没有文章价格报错BUG
修复用户找回密码功能重置密码后无点击确认修改新密码按钮BUG
修复下载次数超出限制弹出提示无法返回文章页面BUG
修复文章数量较大的时候，再后台删除管理界面清理迁移老款下载字段数据时内存不足致命报错BUG
修复部分翻译传参BUG导致页面链接错乱BUG
修复用户评论区域用户昵称和会员类型标识显示错误BUG
修复网站关闭登录功能后前台顶部没有关闭登录按钮BUG
优化网站评论功能只允许评论文本内容或者图片img标签，安全过滤其他不安全乱码脚本
优化网站底部右侧按钮先下始终固定显示，下拉只显示返回顶部按钮
优化分类页面顶部背景装饰图优先调用分类特色图，如果没有设置分类特色图，则调用当前分类第一个文章的特色图
新增主题设置布局设置内容页面设置自定义文章展示布局风格，支持常规和顶部背景标题模式
新增用户个人中心可以修改邮箱地址
新增第三方登录用户可以直接修改密码
新增全站顶部搜索按钮，点击搜索图标可以再顶部滑出搜索框，点击空白区域可关闭搜索框

==>正式版5.4.0 2023-6-29
修复wp_timezone函数引起的时区报错BUG
修复部分浏览器无法登录注册浏览器js报错BUG
修复主题设置高级筛选显示设置为单选radio模式，避免超过一定数量后设置无法保存
修复用户累计佣金统计数字小数点格式化导致不准BUG
新增发布文章编辑器添加添加内容组件按钮，可以添加视频播放器、按钮、提示框、列表内容组件，无缝兼容老款简码内容
新增主题设置布局设置中底部设置是否启用网站高级底部，开关可以控制全站底部高级信息显示隐藏

==>正式版5.3.0 2023-6-28
修复文章内容中图片高度和宽度过长时变形BUG
修复PayPal（贝宝）支付回调无效BUG
修复支付成功后跳转页面不对应BUG

==>正式版5.2.0 2023-6-28
修复易支付配置启用后，前台支付返回null跳转支付页面BUG
修复虎皮椒支付微信和支付宝接口前端支付图标错误BUG
修复封号用户登录无效BUG
修复首页cms文章模块自定义标题无效BUG，改为优先显示自定义标题，不设置标题则自动获取分类名称

==>正式版5.1.0 2023-6-27
修复虎皮椒支付弹窗不显示图标和提示BUG
修复评论框未登录用户提示文字错位BUG
修复个人中心上传本地头像时，如果有第三方云储存插件会不显示头像BUG
修复QQ登录后未登录跳转到个人中心界面BUG
修复若干后台主题设置错别字和错误描述
修复启用子主题后覆盖模板文件无效或个人中心打不开
ripro-v5官方文档教程：https://ritheme.com/document/category/ripro-v5

------>> V5.0.0 <<-------------------------------------------------------
2023全新架构版本RiPro-V5版WordPress主题发布。
老用户升级说明：老款ripro和ripro-v2用户网站，可直接在后台外观主题上传最新版RiPro-V5版本主题。数据支持一键升级迁移兼容、无损兼容，无缝兼容
迁移旧版本数据方式：在wp后台（数据清理界面中包含了迁移旧版本订单数据，迁移旧版本资源地址，迁移旧版本自定义筛选字段功能），迁移后不可回退，如有疑虑，请备份好数据库在操作


RiPro主题版本命名及更新历史简介
RiPro是一款功能丰富的WordPress主题。为了帮助用户清晰地区分不同版本，我们采用了特定的命名约定。

1. 初始版本：
主题名称：RiPro
文件夹名称：ripro

2. V2版本：
当RiPro主题进行重大更新时，我们会在主题名称后加上“V”并增加版本号，以示区分。例如，第一个大版本更新被命名为RiPro-V2，对应的文件夹名称为ripro-v2。这种命名方式有助于老用户区分主题包的版本，同时避免因不清楚版本差异而错误地覆盖旧版本。

3. V5版本：
主题名称：RiPro-V5
文件夹名称：ripro-v5
RiPro-V5是经过全面重写的版本，包含了许多新功能和前端界面的优化。这个版本采用了最新的Bootstrap 5框架，并使用Webpack和Gulp自动化构建工具进行打包和开发。前后端性能提升巨大，此外，RiPro-V5已经内置了简体中文、繁体中文和英文的多语言支持。
值得一提的是，“V5”不仅表示这是第五个大版本，而且“5”在中文中有“威武”之意，象征着这个版本的强大和先进。



 */